---
description: "Business logic rules — domain rules and behavioral constraints for the entire church management system"
alwaysApply: false
---

# Business Logic Rules

This is a Seventh-day Adventist church management system (CHMS). These are the domain rules that every feature must follow. The system will eventually cover attendance, finances, ministries, events, and more — but the sections below reflect only what has been **implemented so far**.

---

## People & Households (implemented)

### Households

- Every person MUST belong to a household — there are no "standalone" people
- Individuals (people who don't belong to a family) still get a household — they become the head of a new single-member household
- Each household has exactly one head
- Only a head can create a new household — non-heads must join an existing household
- When a head is added without selecting a household, a new household is created automatically
- Household name is derived from the head: "{firstName} {lastName} Family"
- The household itself stores no address or contact info — that all comes from the head member
- Deleting a household does not delete its members

### Head-of-Household Fallback

When a non-head member is missing address, phone, or preferred visiting time, we display the head's info instead. The UI indicates when info is coming from the household rather than the person directly.

Heads never fall back — they always show their own info.

### Person Identity

- A person is uniquely identified by first name + last name + date of birth
- Email must be unique across all people
- Names are always title-cased before saving

### Conditional Rules

- Wedding date is only relevant when marital status is not "single"
- Household selection is only relevant for non-heads — heads always create a new household
- Baptism minimum age is 8 (SDA practice)

### Computed Data

- Full name and age are derived from stored fields, not entered directly

### Membership & Status

- Membership statuses: member, regular attendee, visitor, inactive, moved, deceased
- Soft delete via an active flag — people are never hard-deleted
- Defaults for new people: marital status is "single", membership is "member", dietary preference is "none"
- A person is considered deceased if their membership status is "deceased" **or** they have a memorial day set
- Active members = status "member" or "regular attendee"
- Inactive members = status "inactive" or "moved"
- "New this quarter" = people whose date joined church falls within the last ~90 days

### Sabbath School Classes

Assigned by age group: Beginner (0–2), Kindergarten (3–5), Primary (6–9), Junior (10–12), Earliteen (13–14), Youth (15–18), Young Adult (19–30), Adult (30+)

### Important Dates

- Each person can have custom important dates (e.g. work/business anniversary, graduation) — separate from birthdays, wedding anniversaries, and memorial days, which have their own dedicated views
- Baptism anniversaries are automatically derived from the baptism date — they don't need to be entered manually
- Deceased people are excluded from Important Dates
- An important date can be either a one-time occasion or a yearly recurring occasion
- Important dates can optionally be categorised as Personal, Church, Business/Work, Academic, or Health

### Celebrations

- Birthdays and wedding anniversaries are considered celebrations
- Deceased people are excluded from celebrations
- A married couple in the same household shares a single anniversary celebration — it is not listed separately per spouse

### Memorial Watch

- A memorial day is a date set on a deceased person to remember the passing of a loved one
- Memorial Watch surfaces deceased people whose memorial day anniversary falls within the current week

---

## Future Modules (not yet implemented)

The following areas are planned but have no rules defined yet. Add rules here as each module is built:

- **Attendance** — Sabbath tracking, midweek services, etc.
- **Finances** — Tithe, offerings, budgets
- **Ministries & Departments** — Roles, leadership, assignments
- **Events & Calendar** — Church events, scheduling
- **Communications** — Announcements, notifications

---

## Keeping This File Up to Date

Only update this file when there is a **meaningful change** to how the system works — a new domain constraint, a changed default, new conditional logic, or a revised rule. When in doubt, **do not update**. Minor implementation tweaks, refactors, and UI adjustments should not result in new rules. When a new module is started, move it from the "Future Modules" list into its own section with concrete rules.

**Writing style**: Rules must be written in plain domain language — describe _how the system behaves_, not how it's built. Never reference code (variable names, function names, field names), specific UI elements (widgets, cards, pages), or implementation details (sorting, filtering, API calls). A non-technical person should be able to read and understand every rule.

**What does NOT belong here**: Front-end display logic — how data is shown, grouped, sorted, filtered, or time-windowed in the UI — is not a business rule. For example, "show dates within the current week" describes a UI view, not a domain constraint. Only include rules the system *enforces* regardless of how or where the data is displayed.
